<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="MovieTicketingSystem.View.Admin"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:converter="clr-namespace:MovieTicketingSystem.Converters"
    xmlns:model="clr-namespace:MovieTicketingSystem.Model"
    xmlns:vm="clr-namespace:MovieTicketingSystem.ViewModel"
    Title="Admin"
    x:DataType="vm:AdminViewModel">
    <ContentPage.Resources>
        <ResourceDictionary>
            <converter:ByteArrayToImageSourceConverter x:Key="ByteArrayToImageSourceConverter" />
            <Style TargetType="Image">
                <Setter Property="WidthRequest" Value="300" />
                <Setter Property="HeightRequest" Value="200" />
                <Setter Property="Aspect" Value="AspectFill" />
            </Style>

            <Style TargetType="Frame">
                <Setter Property="WidthRequest" Value="300" />
                <Setter Property="HeightRequest" Value="300" />
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>
    <Grid RowDefinitions="Auto,Auto,*">
        <Label
            FontSize="Large"
            HorizontalTextAlignment="Center"
            Text="HOMEPAGE" />

        <VerticalStackLayout Grid.Row="1">
            <Label FontSize="Medium" Text="Upcoming Movies" />
            <CollectionView
                HorizontalOptions="StartAndExpand"
                Margin="20"
                EmptyView="No Movie Added"
                ItemsSource="{Binding MovieCollection}">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="model:Movie">

                        <Frame Background="firebrick" HasShadow="False">
                            <StackLayout>
                                <Label Text="{Binding Name, StringFormat='Movie Title: {0} '}" />
                                <Label Text="{Binding StartTime}" />
                                <Label Text="{Binding EndTime}" />
                                <Image Source="{Binding Image, Converter={StaticResource ByteArrayToImageSourceConverter}}" />
                            </StackLayout>
                        </Frame>

                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </VerticalStackLayout>
        <VerticalStackLayout Grid.Row="2">
            <Label FontSize="Medium" Text="Now Showing Movies" />
            <CollectionView EmptyView="No movies yet" />

        </VerticalStackLayout>
    </Grid>
</ContentPage>